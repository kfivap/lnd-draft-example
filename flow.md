## Ввод средств 
### Вариант 1 - через инвойс
1    даем наш identity_pubkey , дополнительно если требуется, можем указать ip для подключения напрямую

    024837a2fc6dedd6869f283af2054688866df6f4cfad07384e3d3cf08de31ed3dc либо же  024837a2fc6dedd6869f283af2054688866df6f4cfad07384e3d3cf08de31ed3dc@172.30.0.4
    даем инвойс для оплаты, пример 
    lnsb10u1p3k5xfypp5j2rhsruwuddcja73ww3tppgwwgldlyzp4933ah3lf2ccf0f9mlgqdqqcqzpgxqyz5vqsp5anx728swc0nkxe9vedxhf3ad6068h3sasn0zywgm5jkjad2l0kpq9qyyssqx80x0zwj82jzwlvnadh6v5rj23fq3sky6r6yga4fx4nqu2u6edd4x68pf7v7gfwtcj3ntjpuahhz74cr5hs62q3zsp5du6njd4tm2eqqjqf0rt

2. пользователь оплачивает инвойс

3. мы проверяем статус инвойса
lncli --network=simnet decodepayreq инвойс
 lncli --network=simnet lookupinvoice <payment_hash>
возможно можно подписаться на события по инвойсу, нужно ознакомиться с докой

4. зачисляем средства на счет в свапе

### Вариант 2 - через прямую оплату с указанием мемо
1. даем наш identity_pubkey , дополнительно если требуется, можем указать ip для подключения напрямую
    024837a2fc6dedd6869f283af2054688866df6f4cfad07384e3d3cf08de31ed3dc либо же  024837a2fc6dedd6869f283af2054688866df6f4cfad07384e3d3cf08de31ed3dc@172.30.0.4
    даем пользователю мемо
2. пользователь оплачивает транзакцию указывая мемо
3. отслеживаем транзы, ищем пользователя с таким мемо
4. зачисляем средства на счет


Вариант со вводом средств по инвойсу предпочтительнее, поскольку мы можем посчитать открытые каналы, их вместимость, если не помещается, открыть новый канал




## Вывод средств 
### Вариант 1 - через инвойс
1. получаем у пользователя identity_pubkey, (опоционально ip для открытия канала напрямую),инвойс
2. мы проводим транзакцию в swap блокчейне
3. мы оплачиваем инвойс


## Вывод средств 
### Вариант 1 - через прямую оплату
1. получаем у пользователя identity_pubkey, (опоционально ip для открытия канала напрямую), сумму, мемо(если требуется)
2. мы проводим транзакцию в swap блокчейне
3. мы проводим транзу в lightning сети

